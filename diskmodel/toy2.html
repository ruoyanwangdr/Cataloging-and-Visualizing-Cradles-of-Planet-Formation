<html>
	<head>
		<title>Disk model test</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
		<script src="js/controls/OrbitControls.js">

		</script>
		<script>
			// Camera and background stuff
			var renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );

			var scene = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera( 45, window.innerWidth/window.innerHeight, 1, 10000 );

			var controls = new THREE.OrbitControls( camera, renderer.domElement );

			// Create an array of points
			var points = [];
			//for ( var i = 0; i < 10; i ++ ) {
			//	points.push( new THREE.Vector2( Math.sin( i * 0.2 ) * 10 + 5, ( i - 5 ) * 2 ) );
			points.push( new THREE.Vector3( 4, 0.5, 0 ) );
			points.push( new THREE.Vector3( 6, 0.75, 0 ) );
			points.push( new THREE.Vector3( 8, 1, 0 ) );
			points.push( new THREE.Vector3( 10, 1.5, 0 ) );
			points.push( new THREE.Vector3( 13, 3, 0 ) );
			points.push( new THREE.Vector3( 13, 0, 0 ) );
			points.push( new THREE.Vector3( 13, -3, 0 ) );
			points.push( new THREE.Vector3( 10, -1.5, 0 ) );
			points.push( new THREE.Vector3( 8, -1, 0 ) );
			points.push( new THREE.Vector3( 6, -0.75, 0 ) );
			points.push( new THREE.Vector3( 4, -0.5, 0 ) );

			// then make a spline curve to interpolate the curve between the points
			curve = new THREE.CatmullRomCurve3(points);
			// then specify the number of points on that curve and make it into an array of points
			var numPoints = 50;
			var splinePoints = curve.getPoints(numPoints);

			// Make a new lathe geometry out of of the array of points you just created
			//var geometry = new THREE.LatheGeometry( splinePoints,10,0,Math.PI);
			var geometry = new THREE.LatheGeometry( splinePoints, segments=36 );
			var material = new THREE.MeshNormalMaterial({opacity : 1.0,
				transparent: true,
				side: THREE.DoubleSide});
			var disk = new THREE.Mesh( geometry, material );

			disk.rotation.x = - Math.PI / 2.0 ;
			scene.add( disk );

			// Add a star in the middle
			var star = new THREE.SphereGeometry( 1, 32, 32 );
			var starMesh = new THREE.Mesh( star, material );
			starMesh.position.set(0, 0, 0);
			//var starBSP = new ThreeBSP( starMesh );
			scene.add( starMesh );

			// Create a closed wavey loop to see the shape
			var points = curve.getPoints( 50 );
			var geometry = new THREE.BufferGeometry().setFromPoints( points );

			var material = new THREE.LineBasicMaterial( { color : 0xff0000 } );

			// Create the final object to add to the scene
			var curveObject = new THREE.Line( geometry, material );
			curveObject.position.set(20, 0, 0)
			scene.add(curveObject)

			// controls.update() must be called after any manual changes to the camera's transform
			camera.position.set( 0, 0, 70 );
			//camera.position.z = 70;
			controls.update();

			var animate = function () {
				requestAnimationFrame( animate );

				//lathe.rotation.x += 0.01;
				//lathe.rotation.y += 0.01;

				renderer.render( scene, camera );
			};

			animate();
		</script>
	</body>
</html>
